// egnyte-js-sdk v2.0.0 (2015-09-18) 
// license:Apache2 
// ztenerowicz@egnyte.com 
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Egnyte=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(a){function b(a){return"function"==typeof a}function c(a){return"object"==typeof a}function d(a){"undefined"!=typeof setImmediate?setImmediate(a):"undefined"!=typeof process&&process.nextTick?process.nextTick(a):setTimeout(a,0)}var e;a[0][a[1]]=function f(a){var g,h=[],i=[],j=function(a,b){return null==g&&null!=a&&(g=a,h=b,i.length&&d(function(){for(var a=0;a<i.length;a++)i[a]()})),g};return j.then=function(j,k){var l=f(a),m=function(){function a(d){var f,g=0;try{if(d&&(c(d)||b(d))&&b(f=d.then)){if(d===l)throw new TypeError;f.call(d,function(){g++||a.apply(e,arguments)},function(a){g++||l(!1,[a])})}else l(!0,arguments)}catch(h){g++||l(!1,[h])}}try{var d=g?j:k;b(d)?a(d.apply(e,h||[])):l(g,h)}catch(f){l(!1,[f])}};return null!=g?d(m):i.push(m),l},a&&(j=a(j)),j}}("undefined"==typeof b?[window,"pinkySwear"]:[b,"exports"])},{}],2:[function(a,b){var c,d="undefined"!=typeof window?window.navigator.userAgent:"",e=/OS X/.test(d),f=/Opera/.test(d),g=!/like Gecko/.test(d)&&!f,h=b.exports={0:e?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:e?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:e&&g?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:f?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(c=58;65>c;++c)h[c]=String.fromCharCode(c);for(c=48;58>c;++c)h[c]=c-48+"";for(c=65;91>c;++c)h[c]=String.fromCharCode(c);for(c=96;106>c;++c)h[c]="<num-"+(c-96)+">";for(c=112;136>c;++c)h[c]="F"+(c-111)},{}],3:[function(a,b){"use strict";function c(a,b){function c(){4===l.readyState&&j()}function d(){var a=void 0;if(l.response?a=l.response:"text"!==l.responseType&&l.responseType||(a=l.responseText||l.responseXML),t)try{a=JSON.parse(a)}catch(b){}return a}function e(a){clearTimeout(n),a instanceof Error||(a=new Error(""+(a||"unknown"))),a.statusCode=0,b(a,k)}function j(){clearTimeout(n);var a=1223===l.status?204:l.status,c=k,e=null;0!==a?(c={body:d(),statusCode:a,method:p,headers:{},url:o,rawRequest:l},l.getAllResponseHeaders&&(c.headers=g(l.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),b(e,c,c.body)}var k={body:void 0,headers:{},statusCode:0,method:p,url:o,rawRequest:l};if("string"==typeof a&&(a={uri:a}),a=a||{},"undefined"==typeof b)throw new Error("callback argument missing");b=f(b);var l=a.xhr||null;l||(l=a.cors||a.useXDR?new i:new h);var m,n,o=l.url=a.uri||a.url,p=l.method=a.method||"GET",q=a.body||a.data,r=l.headers=a.headers||{},s=!!a.sync,t=!1;if("json"in a&&(t=!0,r.Accept||(r.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(r["Content-Type"]="application/json",q=JSON.stringify(a.json))),l.onreadystatechange=c,l.onload=j,l.onerror=e,l.onprogress=function(){},l.ontimeout=e,l.open(p,o,!s),l.withCredentials=!!a.withCredentials,!s&&a.timeout>0&&(n=setTimeout(function(){l.abort("timeout")},a.timeout+2)),l.setRequestHeader)for(m in r)r.hasOwnProperty(m)&&l.setRequestHeader(m,r[m]);else if(a.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(l.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(l),l.send(q),l}function d(){}var e=a(4),f=a(5),g=a(9),h=e.XMLHttpRequest||d,i="withCredentials"in new h?h:e.XDomainRequest;b.exports=c},{4:4,5:5,9:9}],4:[function(a,b){b.exports="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}},{}],5:[function(a,b){function c(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(this,arguments))}}b.exports=c,c.proto=c(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return c(this)},configurable:!0})})},{}],6:[function(a,b){function c(a,b,c){if(!g(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===h.call(a)?d(a,b,c):"string"==typeof a?e(a,b,c):f(a,b,c)}function d(a,b,c){for(var d=0,e=a.length;e>d;d++)i.call(a,d)&&b.call(c,a[d],d,a)}function e(a,b,c){for(var d=0,e=a.length;e>d;d++)b.call(c,a.charAt(d),d,a)}function f(a,b,c){for(var d in a)i.call(a,d)&&b.call(c,a[d],d,a)}var g=a(7);b.exports=c;var h=Object.prototype.toString,i=Object.prototype.hasOwnProperty},{7:7}],7:[function(a,b){function c(a){var b=d.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=c;var d=Object.prototype.toString},{}],8:[function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}c=b.exports=d,c.left=function(a){return a.replace(/^\s*/,"")},c.right=function(a){return a.replace(/\s*$/,"")}},{}],9:[function(a,b){var c=a(8),d=a(6),e=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports=function(a){if(!a)return{};var b={};return d(c(a).split("\n"),function(a){var d=a.indexOf(":"),f=c(a.slice(0,d)).toLowerCase(),g=c(a.slice(d+1));"undefined"==typeof b[f]?b[f]=g:e(b[f])?b[f].push(g):b[f]=[b[f],g]}),b}},{6:6,8:8}],10:[function(a,b){b.exports={handleQuota:!0,QPS:2,forwarderAddress:"app/integ/forwarder/1.4/apiForwarder.html",channelMarker:"'E",httpRequest:null,oldIEForwarder:!1}},{}],11:[function(a,b){var c=a(48),d=a(33),e=a(39),f=a(14);c.plugin("filePicker",function(a,b){a.filePicker=d(b.API)}),c.plugin("authPrompt",f),c.plugin("prompt",function(a){a.prompt=e}),b.exports=c},{14:14,33:33,39:39,48:48}],12:[function(a,b){var c=a(23),d=a(13),e=a(26),f=a(21),g=a(19),h=a(22),i=a(27),j=a(18),k=a(25);b.exports=function(b){var l=new d(b),m=new c(l,b),n=new e(m),o=new f(m),p=new g(m),q=new h(m),r=new i(m),s=new k(m),t=new j(m),u={auth:l,storage:n,notes:o,link:p,events:t,search:s,perms:q,userPerms:r};if(!("withCredentials"in new window.XMLHttpRequest))if(b.acceptForwarding){var v=a(28);v(b,u)}else if(b.oldIEForwarder){var w=a(29);w(b,u)}return u.manual=m,u}},{13:13,18:18,19:19,21:21,22:22,23:23,25:25,26:26,27:27,28:28,29:29}],13:[function(a,b){function c(a){this.type="Bearer",this.options=a,this.options.token&&(this.token=this.options.token),this.userInfo=null,this.getUserInfo=g.bindThis(this,this.getUserInfo)}var d=/access_token=([^&]+)/,e=/error=access_denied/,f=a(38),g=a(42),h=a(40),i=a(43),j=(a(17),a(30).userinfo),k=a(30).tokenauth,l={};l._buildTokenQuery=function(a){var b=this.options.egnyteDomainURL+k+"?client_id="+this.options.key+"&mobile="+~~this.options.mobile+"&redirect_uri="+encodeURIComponent(a);return this.options.scope&&(b+="&scope="+this.options.scope),b},l._reloadForToken=function(){window.location.href=this._buildTokenQuery(window.location.href)},l._checkTokenResponse=function(a,b,c,f){var g=f||window;if(this.token)a&&a();else{this.userInfo=null;var h=d.exec(g.location.hash);h?h.length>1&&(this.token=h[1],a&&a()):e.test(g.location.href)?b&&b():c&&c()}},l.requestTokenReload=function(a,b){this._checkTokenResponse(a,b,g.bindThis(this,this._reloadForToken))},l.requestTokenIframe=function(a,b,c,d){if(this.token)b();else{var e=this,f=window.location;d=d?f.protocol+"//"+f.host+d:f.href;var g=e._buildTokenQuery(d),i=h.createFrame(g,!0);i.onload=function(){try{var d=i.contentWindow.location,f={location:{hash:""+d.hash,href:""+d.href}};e._checkTokenResponse(function(){i.src="",a.removeChild(i),b()},function(){i.src="",a.removeChild(i),c()},null,f)}catch(g){}},a.appendChild(i)}},l._postTokenUp=function(){var a=this;if(!this.token&&window.name===this.options.channelMarker){var b={marker:this.options.channelMarker,sourceOrigin:this.options.egnyteDomainURL};this._checkTokenResponse(function(){i.sendMessage(window.opener,b,"token",a.token)},function(){i.sendMessage(window.opener,b,"denied","")})}},l.requestTokenPopup=function(a,b,c){var d=this;if(this.token)a();else{var e=this._buildTokenQuery(c),f=window.open(e);f.name=this.options.channelMarker;var g=i.createMessageHandler(null,this.options.channelMarker,function(c){j.destroy(),f.close(),"token"===c.action&&(d.token=c.data,a&&a()),"denied"===c.action&&b&&b()}),j=h.addListener(window,"message",g)}},l.requestTokenByPassword=function(a,b){var c=this;return this.requestEngine.promiseRequest({method:"POST",url:this.options.egnyteDomainURL+k+"",headers:{"content-type":"application/x-www-form-urlencoded"},body:["client_id="+this.options.key,"grant_type=password","username="+a,"password="+b].join("&")},null,!0).then(function(a){return c.token=a.body.access_token,c.token})},l.authorizeXHR=function(a){a.setRequestHeader("Authorization","Bearer "+this.token)},l.getHeaders=function(){return{Authorization:"Bearer "+this.token}},l.isAuthorized=function(){return!!this.token},l.getToken=function(){return this.token},l.setToken=function(a){this.token=a},l.dropToken=function(){this.token=null},l.addRequestEngine=function(a){this.requestEngine=a},l.getUserInfo=function(){var a=this;return a.userInfo||!this.requestEngine?f(!0).then(function(){return a.userInfo}):this.requestEngine.promiseRequest({method:"GET",url:this.requestEngine.getEndpoint()+j}).then(function(b){return a.userInfo=b.body,b.body})},c.prototype=l,b.exports=c},{17:17,30:30,38:38,40:40,42:42,43:43}],14:[function(a,b){function c(a){return-1===a.indexOf(".")&&(a+=".egnyte.com"),a}var d=a(39),e=a(42);b.exports=function(a){a.API.auth.requestTokenIframeWithPrompt=function(b,f,g,h){d(b,{texts:{question:"Your egnyte domain address"},result:function(d){a.setDomain(e.httpsURL(c(d))),a.API.auth.requestTokenIframe(b,f,g,h)}})}}},{39:39,42:42}],15:[function(a,b,c){function d(a,b,c,d,e){c=g.encodeNameSafe(c)||"";var f={headers:d,method:"POST",url:a.getEndpoint()+h.fschunked+encodeURI(c),body:e};return a.promiseRequest(b(f))}function e(a,b,c){this.storage=a,this.path=b,this.mime=c,this.num=1,this.successful=1,this.chunksPromised=[]}var f=a(38),g=a(42),h=a(30),i={};i.setId=function(a){this.id=a},i.sendChunk=function(a,b,c){var e=this,f=this.storage.requestEngine,g=this.storage.getDecorator();b?e.num=b:b=++e.num;var h={"x-egnyte-upload-id":e.id,"x-egnyte-chunk-num":e.num},i=d(f,g,e.path,h,a).then(function(a){return c&&c(a.response.headers["x-egnyte-chunk-sha512-checksum"]),e.successful++,a});return e.chunksPromised.push(i),i},i.sendLastChunk=function(a,b){var c=this,e=this.storage.requestEngine,g=this.storage.getDecorator(),h={"x-egnyte-upload-id":c.id,"x-egnyte-last-chunk":!0,"x-egnyte-chunk-num":c.num+1};return c.mime&&(h["content-type"]=c.mime),f.allSettled(this.chunksPromised).then(function(){if(c.num===c.successful)return d(e,g,c.path,h,a).then(function(a){return b&&b(a.response.headers["x-egnyte-chunk-sha512-checksum"]),{id:a.response.headers.etag,path:c.path}});throw new Error("Tried to commit a file with missing chunks (some uploads failed)")})},e.prototype=i,c.startChunkedUpload=function(a,b,c,g){var h=this.requestEngine,i=this.getDecorator(),j=new e(this,a,c);return f(!0).then(function(){var e={};return c&&(e["content-type"]=c),d(h,i,a,e,b)}).then(function(a){return g&&g(a.response.headers["x-egnyte-chunk-sha512-checksum"]),j.setId(a.response.headers["x-egnyte-upload-id"]),j})}},{30:30,38:38,42:42}],16:[function(a,b){function c(){var a=this;return function(b){return d.each(a._decorators,function(c,d){void 0!==a._decorations[d]&&(b=c(b,a._decorations[d]))}),b}}var d=a(42),e={impersonate:function(a,b){return a.headers||(a.headers={}),b.username&&(a.headers["X-Egnyte-Act-As"]=b.username),b.email&&(a.headers["X-Egnyte-Act-As-Email"]=b.email),a}};b.exports={install:function(a){function b(a){d.each(a._decorators,function(e,f){a[f]=function(a){var e=function(){};e.prototype=this;var g=new e;return g.getDecorator=c,g._decorations=d.extend({},this._decorations),g._decorations[f]=a||null,b(g),g}})}a._decorators=d.extend({},e),b(a),a.addDecorator=function(a,c){this._decorators[a]=c,b(this)},a.getDecorator=function(){return d.id}}}},{42:42}],17:[function(a,b){function c(a){var b;for(var d in a){if(e[d])return a[d];if("object"==typeof a[d]&&(b=c(a[d])))return b}}function d(a,b){var d;if("string"==typeof a){try{d=c(JSON.parse(a)),d||(d=a)}catch(e){d=a?a.replace(f,"$1"):"Unknown error"}404===b&&a.length>300&&(d="Not found")}else d=c(a);return d}var e={msg:1,message:1,errorMessage:1},f=/^\s*<h1>([^<]*)<\/h1>\s*$/gi;b.exports=function(a){var b,c;return a.response?(c=~~a.response.statusCode,b=a.error,b.statusCode=c,b.message=""+d(a.body||a.error.message,c),b.response=a.response,b.body=a.body):(b=a.error,b.statusCode=0),b}},{}],18:[function(a,b){function c(a){this.requestEngine=a,i.install(this),this.addDecorator("filter",d),this.addDecorator("notMy",e)}function d(a,b){return a.params||(a.params={}),b.folder&&(a.params.folder=b.folder),b.type&&(a.params.type=b.type.join?b.type.join("|"):b.type),a}function e(a,b){return a.params||(a.params={}),a.params.suppress=b?b:"app",a}var f=a(38),g=a(42),h=a(41),i=a(16),j=a(30).events,k=a(30).eventscursor,l=20;c.prototype={getCursor:function(){var a=this.requestEngine;return a.promiseRequest({method:"GET",url:a.getEndpoint()+k}).then(function(a){return a.body.latest_event_id})},getUpdate:function(a){var b=this.requestEngine,c=this.getDecorator();return f(!0).then(function(){if(!(a.start>=0))throw new Error("'start' option is required");var d=a.count||l;return b.promiseRequest(c({method:"GET",url:b.getEndpoint()+j,params:{id:a.start,count:d}}))}).then(function(b){return b.body&&a.emit&&g.each(b.body.events,function(b){setTimeout(function(){a.emit(b)},0)}),b})},listen:function(a){var b=this;return f(!0).then(function(){return isNaN(a.start)?b.getCursor():a.start}).then(function(c){var d=c;return a.current&&a.current(d),h(Math.max(a.interval||3e4,2e3),function(c){var e=a.count||l;return b.getUpdate({count:e,emit:a.emit,start:d}).then(function(b){b.body&&(d=b.body.latest_id,a.current&&a.current(d),b.body.events.length>=e&&c.repeat()),a.heartbeat&&a.heartbeat(b.body)})},a.error)})}},b.exports=c},{16:16,30:30,38:38,41:41,42:42}],19:[function(a,b){function c(a){this.requestEngine=a,f.install(this)}var d=a(38),e=a(42),f=a(16),g=a(30).links,h={};h.createLink=function(a){var b=this.requestEngine,c=this.getDecorator(),f={path:null,type:"file",accessibility:"domain"};return d(!0).then(function(){if(a=e.extend(f,a),a.path=e.encodeNameSafe(a.path),!a.path)throw new Error("Path attribute missing or incorrect");return b.promiseRequest(c({method:"POST",url:b.getEndpoint()+g,json:a}))}).then(function(a){return a.body})},h.removeLink=function(a){var b=this.requestEngine,c=this.getDecorator();return b.promiseRequest(c({method:"DELETE",url:b.getEndpoint()+g+"/"+a})).then(function(a){return a.response.statusCode})},h.listLink=function(a){var b=this.requestEngine,c=this.getDecorator();return b.promiseRequest(c({method:"GET",url:b.getEndpoint()+g+"/"+a})).then(function(a){return a.body})},h.listLinks=function(a){var b=this.requestEngine,c=this.getDecorator();return d(!0).then(function(){return a.path=a.path&&e.encodeNameSafe(a.path),b.promiseRequest(c({method:"get",url:b.getEndpoint()+g,params:a}))}).then(function(a){return a.body})},h.findOne=function(a){var b=this;return b.listLinks(a).then(function(a){return a.ids&&a.ids.length>0?b.listLink(a.ids[0]):null})},c.prototype=h,b.exports=c},{16:16,30:30,38:38,42:42}],20:[function(a,b,c){var d=a(38),e=a(42),f=a(30).fsmeta;c.lock=function(a,b,c){var g=this.requestEngine,h=this.getDecorator();return d(!0).then(function(){a=e.encodeNameSafe(a);var d={action:"lock"};b&&(d.lock_token=b),c&&(d.lock_timeout=c);var i={method:"POST",url:g.getEndpoint()+f+encodeURI(a),json:d};return g.promiseRequest(h(i))}).then(function(b){return b.body.path=a,b.body})},c.unlock=function(a,b){var c=this.requestEngine,g=this.getDecorator();return d(!0).then(function(){a=e.encodeNameSafe(a);var d={action:"unlock",lock_token:b},h={method:"POST",url:c.getEndpoint()+f+encodeURI(a),json:d};return c.promiseRequest(g(h))}).then(function(){return{path:a}})}},{30:30,38:38,42:42}],21:[function(a,b){function c(a){this.requestEngine=a,f.install(this)}var d=a(38),e=a(42),f=a(16),g=a(30).notes,h={};h.path=function(a){a=e.encodeNameSafe(a);var b=this;return{addNote:function(c){var e=b.requestEngine,f=b.getDecorator();return d(!0).then(function(){var b={method:"POST",url:e.getEndpoint()+g,json:{path:a,body:c}};return e.promiseRequest(f(b))}).then(function(a){return{id:a.body.id}})},listNotes:function(c){var f=b.requestEngine,h=b.getDecorator();return d(!0).then(function(){a=e.encodeNameSafe(a);var b={method:"GET",url:f.getEndpoint()+g};return b.params=e.extend({file:encodeURI(a)},c),f.promiseRequest(h(b)).then(function(a){return a.body})})}}},h.getNote=function(a){var b=this.requestEngine,c=this.getDecorator();return d(!0).then(function(){var d={method:"GET",url:b.getEndpoint()+g+"/"+encodeURI(a)};return b.promiseRequest(c(d)).then(function(a){return a.body})})},h.removeNote=function(a){var b=this.requestEngine,c=this.getDecorator();return d(!0).then(function(){var d={method:"DELETE",url:b.getEndpoint()+g+"/"+encodeURI(a)};return b.promiseRequest(c(d))})},c.prototype=h,b.exports=c},{16:16,30:30,38:38,42:42}],22:[function(a,b){function c(a){this.requestEngine=a,g.install(this),this.addDecorator("users",d("users")),this.addDecorator("groups",d("groups"))}function d(a){return function(b,c){switch(b.method){case"GET":b.params||(b.params={}),b.params[a]=c.join("|");break;case"POST":b.json[a]=c}return b}}var e=a(38),f=a(42),g=a(16),h=a(24),i=a(30).perms,j={};j.disallow=function(a){return j.allow.call(this,a,"None")},j.allowView=function(a){return j.allow.call(this,a,"Viewer")},j.allowEdit=function(a){return j.allow.call(this,a,"Editor")},j.allowFullAccess=function(a){return j.allow.call(this,a,"Full")},j.allowOwnership=function(a){return j.allow.call(this,a,"Owner")},j.allow=function(a,b){var c=this.requestEngine,d=this.getDecorator();return e(!0).then(function(){a=f.encodeNameSafe(a)||"";var e={method:"POST",url:c.getEndpoint()+i+a,json:{permission:b}};return c.promiseRequest(d(e))}).then(function(a){return a.response})},j.getPerms=function(a){var b=this.requestEngine,c=this.getDecorator();return e(!0).then(function(){a=f.encodeNameSafe(a)||"";var d={method:"GET",url:b.getEndpoint()+i+a};return b.promiseRequest(c(d))}).then(function(a){return a.body})},c.prototype=h(j,{pathPrefix:"/folder"}),delete c.prototype.fileId,b.exports=c},{16:16,24:24,30:30,38:38,42:42}],23:[function(a,b){function c(a,b){this.auth=a,this.options=b,this.requestHandler=b.httpRequest?b.httpRequest:j,this.quota={startOfTheSecond:0,calls:0,retrying:0},this.queue=[],this.queueHandler=h.bindThis(this,e),a.addRequestEngine(this)}function d(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.length?"?"+b.join("&"):""}function e(){if(this.queue.length){var a=f(this.quota,this.options.QPS);if(0===a){var b=this.queue.shift();b(),this.quota.calls++}this.quota.to=setTimeout(this.queueHandler,a)}}function f(a,b){var c=+new Date,d=c-a.startOfTheSecond;return a.retrying?(a.startOfTheSecond=c+a.retrying,a.retrying+1):d>1002?(a.startOfTheSecond=c,a.calls=0,0):a.calls<b?0:1003-d}var g=a(38),h=a(42),i=(a(40),a(43),a(17)),j=a(3),k={Promise:g};k.getEndpoint=function(){return this.options.egnyteDomainURL+"/pubapi"},k.promise=function(a){return g(a)},k.sendRequest=function(a,b,c){var e=this;a=h.extend({},e.options.requestDefaults,a);var f=h.extend({},a);if(this.auth.isAuthorized()||c){if(a.url+=d(a.params),a.headers=a.headers||{},c||(a.headers.Authorization=this.auth.type+" "+this.auth.getToken()),b){var g,i=function(){e.sendRequest(f,e.retryHandler(b,i,g))};return e.timerStart&&(g=e.timerStart()),e.requestHandler(a,e.retryHandler(b,i,g))}return e.requestHandler(a)}b.call(this,new Error("Not authorized"),{statusCode:0},null)},k.retryHandler=function(a,b,c){var d=this;return function(e,f,g){!e&&f.statusCode>=400&&f.statusCode<600&&(e=new Error(g));try{g=JSON.parse(g)}catch(h){}if(f){var i=f.headers["retry-after"],j=f.headers["x-mashery-error-code"];i="array"==typeof i?i[0]:i,j="array"==typeof j?j[0]:j}f&&d.options.handleQuota&&403===f.statusCode&&i?("ERR_403_DEVELOPER_OVER_QPS"===j&&(console&&console.warn("developer over QPS, retrying"),d.quota.retrying=1e3*~~i,setTimeout(function(){d.quota.retrying=0,b()},d.quota.retrying)),"ERR_403_DEVELOPER_OVER_RATE"===j&&(e.RATE=!0,a.call(this,e,f,g))):(f&&d.options.onInvalidToken&&(401===f.statusCode||403===f.statusCode&&"ERR_403_DEVELOPER_INACTIVE"===j)&&(d.auth.dropToken(),d.options.onInvalidToken()),d.timerEnd&&d.timerEnd(c),a.call(this,e,f,g))}},k.retrieveStreamFromRequest=function(a){var b=g.defer(),c=this,d=function(){try{var d=c.sendRequest(a);b.resolve(d)}catch(e){b.reject(i({error:e}))}};return this.options.handleQuota?(this.queue.push(d),clearTimeout(this.quota.to),this.queueHandler()):d(),b.promise},k.promiseRequest=function(a,b,c){var d=g.defer(),e=this,f=function(){try{var f=e.sendRequest(a,function(a,b,c){a?d.reject(i({error:a,response:b,body:c})):d.resolve({response:b,body:c})},c);b&&b(f)}catch(g){d.reject(i({error:g}))}};return this.options.handleQuota?(this.queue.push(f),clearTimeout(this.quota.to),this.queueHandler()):f(),d.promise},k.setupTiming=function(a,b){this.timerStart=a,this.timerEnd=b},c.prototype=k,b.exports=c},{17:17,3:3,38:38,40:40,42:42,43:43}],24:[function(a,b){function c(a,b){return(a?"/ids/folder/":"/ids/file/")+b}function d(a,b,c){return Function.prototype.bind?a.bind(b,c):function(d,e){return a.call(b,c,d,e)}}function e(a,b,c){var e={};return f.each(c,function(c,f){e[f]=d(c,a,b)}),e}var f=a(42);b.exports=function(a,b){return{fileId:function(b){return e(this,c(!1,b),a)},folderId:function(b){return e(this,c(!0,b),a)},path:function(c){return b&&b.pathPrefix&&(c=b.pathPrefix+c),e(this,c,a)},internals:a}}},{42:42}],25:[function(a,b){function c(a){this.requestEngine=a,this.count=10,e.install(this)}var d=a(38),e=(a(42),a(16)),f=a(30).search,g={};g.itemsPerPage=function(a){this.count=a||10},g.query=function(a,b){var c=this,e=c.requestEngine,g=c.getDecorator();return d(!0).then(function(){var d=["query="+encodeURIComponent(a),"offset="+~~b*c.count,"count="+c.count],h="?"+d.join("&"),i={method:"GET",url:e.getEndpoint()+f+h};return e.promiseRequest(g(i))}).then(function(a){return a.body})},g.getResults=function(a){var b=this;return b.query(a).then(function(c){return{page:function(c){return b.query(a,c).then(function(a){return a.results})},totalPages:Math.round(c.total_count/b.count),sample:c.results,totalCount:c.total_count}})},c.prototype=g,b.exports=c},{16:16,30:30,38:38,42:42}],26:[function(a,b){function c(a){this.requestEngine=a,h.install(this)}function d(a,b,c,d,e){return f(!0).then(function(){if(!d)throw new Error("Cannot move to empty path");c=g.encodeNameSafe(c),d=g.encodeNameSafe(d);var f={method:"POST",url:a.getEndpoint()+l.fsmeta+encodeURI(c),json:{action:e,destination:d}};return a.promiseRequest(b(f))}).then(function(a){return 200==a.response.statusCode?{oldPath:c,path:d}:void 0})}function e(a,b,c,d){return f(!0).then(function(){c=g.encodeNameSafe(c)||"";var e={method:"DELETE",url:a.getEndpoint()+l.fsmeta+encodeURI(c)};return d&&(e.params={entry_id:d}),a.promiseRequest(b(e))}).then(function(a){return a.response.statusCode})}var f=a(38),g=a(42),h=a(16),i=(a(21),a(20)),j=a(15),k=a(24),l=a(30),m={};m.exists=function(a){var b=this.requestEngine,c=this.getDecorator();return f(!0).then(function(){a=g.encodeNameSafe(a);var d={method:"GET",url:b.getEndpoint()+l.fsmeta+encodeURI(a)};return b.promiseRequest(c(d))}).then(function(a){return 200==a.response.statusCode?!0:!1},function(a){if(a.response&&404==a.response.statusCode)return!1;throw a})},m.get=function(a,b){var c=this.requestEngine,d=this.getDecorator();return f(!0).then(function(){a=g.encodeNameSafe(a);var e={method:"GET",url:c.getEndpoint()+l.fsmeta+encodeURI(a)};return b&&(e.params={entry_id:b}),c.promiseRequest(d(e))}).then(function(a){return a.body})},m.download=function(a,b,c){var d=this.requestEngine,e=this.getDecorator();return f(!0).then(function(){a=g.encodeNameSafe(a);var f={method:"GET",url:d.getEndpoint()+l.fscontent+encodeURI(a)};return b&&(f.params={entry_id:b}),c&&(f.responseType="arraybuffer"),d.promiseRequest(e(f))}).then(function(a){return a.response})},m.createFolder=function(a){var b=this.requestEngine,c=this.getDecorator();return f(!0).then(function(){a=g.encodeNameSafe(a);var d={method:"POST",url:b.getEndpoint()+l.fsmeta+encodeURI(a),json:{action:"add_folder"}};return b.promiseRequest(c(d))}).then(function(b){return 201==b.response.statusCode?{path:a}:void 0})},m.move=m.rename=function(a,b){return d(this.requestEngine,this.getDecorator(),a,b,"move")},m.copy=function(a,b){return d(this.requestEngine,this.getDecorator(),a,b,"copy")},m.storeFile=function(a,b,c){var d=this.requestEngine,e=this.getDecorator();return f(!0).then(function(){var f=b;a=g.encodeNameSafe(a)||"";var h={method:"POST",url:d.getEndpoint()+l.fscontent+encodeURI(a),body:f};return h.headers={},c&&(h.headers["Content-Type"]=c),d.promiseRequest(e(h))}).then(function(b){return{id:b.response.headers.etag,group_id:b.body.group_id,path:a}})},m.removeFileVersion=function(a,b){var c=this.requestEngine,d=this.getDecorator();return f(!0).then(function(){if(!b)throw new Error("Version ID (second argument) is missing");return e(c,d,a,b)})},m.remove=function(a,b){var c=this.getDecorator();return e(this.requestEngine,c,a,b)},m=g.extend(m,i),m=g.extend(m,j),c.prototype=k(m),b.exports=c},{15:15,16:16,20:20,21:21,24:24,30:30,38:38,42:42}],27:[function(a,b){function c(a){this.requestEngine=a,f.install(this),this.addDecorator("path",d("folder")),this.addDecorator("folderId",d("folder_id"))}function d(a){return function(b,c){return b.params||(b.params={}),b.params[a]=c,b}}var e=a(38),f=(a(42),a(16)),g=a(30).perms,h={};h.get=function(a){var b=this.requestEngine,c=this.getDecorator();return e(!0).then(function(){var d={method:"GET",url:b.getEndpoint()+g+"/user"+(a?"/"+a:"")};return b.promiseRequest(c(d))}).then(function(a){return a.body})},c.prototype=h,b.exports=c},{16:16,30:30,38:38,42:42}],28:[function(a,b){function c(a){var b={};for(var c in a)"function"!=typeof a[c]&&"headers"!==c&&(b[c]=a[c]);return b}function d(a,b){function d(a){if(a.action&&"call"===a.action){var d=a.data;b[d.ns]&&b[d.ns][d.name]?(b.auth.setToken(d.token),b[d.ns][d.name].apply(b[d.ns],d.args).then(function(a){a instanceof XMLHttpRequest&&(a=c(a)),f.sendMessage(window.parent,g,"result",{status:!0,resolution:a,uid:d.uid})},function(a){f.sendMessage(window.parent,g,"result",{status:!1,resolution:a,uid:d.uid})})):f.sendMessage(window.parent,g,"nomethod",{uid:d.uid})}}var g;g={marker:a.channelMarker,sourceOrigin:a.egnyteDomainURL},g.handler=f.createMessageHandler(null,g.marker,d),g._evListener=e.addListener(window,"message",g.handler)}var e=(a(42),a(40)),f=a(43);b.exports=d},{40:40,42:42,43:43}],29:[function(a,b){function c(a){var b=a.data;a.action&&a.data&&m[b.uid]&&("result"===a.action&&(m[b.uid](b.status,b.resolution),m[b.uid]=null),"nomethod"===a.action&&(m[b.uid]=null))}function d(){return""+~~(9999999*Math.random())+~~(9999999*Math.random())}function e(a,b,c,e,f,g){var h=d();m[h]=g,l.sendMessage(a.iframe.contentWindow,a,"call",{ns:b,name:c,args:f,token:e,uid:h},n)}function f(a,b,c,d){return function(){var f=Array.prototype.slice.call(arguments,0),g=i.defer();return c.ready.promise.then(function(){e(c,a,b,d(),f,function(a,b){a?g.resolve(b):g.reject(b)})}),g.promise}}function g(a,b){var c=function(c,d){a[c][d]=f(c,d,b,function(){return a.auth.getToken()})};j.each(a,function(a,b){if("auth"!==b)for(var d in a)c(b,d)}),c("auth","getUserInfo");var d=a.destroy;return a.destroy=function(){return b._evListener.destroy(),b.iframe.parentNode.removeChild(b.iframe),d?d.apply(a,arguments):void 0},a}function h(a,b){n=a.egnyteDomainURL;var d,e;e={marker:a.channelMarker,sourceOrigin:a.egnyteDomainURL,ready:i.defer()},e.handler=l.createMessageHandler(e.sourceOrigin,e.marker,c),e._evListener=k.addListener(window,"message",e.handler),d=k.createFrame(a.egnyteDomainURL+"/"+a.forwarderAddress),d.style.display="none";var f=function(){setTimeout(function(){e.ready.resolve()},50)};d.addEventListener?d.addEventListener("load",f,!1):d.attachEvent&&d.attachEvent("onload",f);var h=document.body||document.getElementsByTagName("body")[0];return h.appendChild(d),e.iframe=d,g(b,e)}var i=a(38),j=a(42),k=a(40),l=a(43),m={},n="";b.exports=h},{38:38,40:40,42:42,43:43}],30:[function(a,b){b.exports={fsmeta:"/v1/fs",fscontent:"/v1/fs-content",fschunked:"/v1/fs-content-chunked",notes:"/v1/notes",links:"/v1/links",perms:"/v1/perms",userinfo:"/v1/userinfo",events:"/v1/events",search:"/v1/search",eventscursor:"/v1/events/cursor",tokenauth:"/puboauth/token"}},{}],31:[function(a,b){b.exports={404:"This item doesn't exist (404)",403:"Access denied (403)",409:"Forbidden location (409)",596:"Path contains an unexpected character (596)","4XX":"Incorrect API request","5XX":"API server error, try again later",R:"API use limit reached",0:"Browser error, try again","?":"Unknown error"}},{}],32:[function(a,b){function c(a){return h[a]||"unknown"}function d(a){var b=a.split(".");return b.length>1?b[b.length-1]:""}function e(a){return c(d(a))}function f(a){return function(b){var e=d(b.name);return a(e,c(e))}}var g=a(42),h={};g.each({audio:["mp3","wav","wma","aiff","mid","midi","mp2"],video:["wmv","avi","mpg","mpeg","mp4","webm","ogv","flv","mov"],pdf:["pdf"],word_processing:["doc","dot","docx","dotx","docm","dotm","odt ","ott","oth","odm","sxw","stw","sxg","sdw","sgl","rtf","hwp","uot","wpd","wps"],spreadsheet:["123","xls","xlt","xla","xlsx","xltx","xlsm","xltm","xlam","xlsb","ods","fods","ots","sxc","stc","sdc","csv","uos"],presentation:["ppt","pot","pps","ppa","pptx","potx","ppsx","ppam","pptm","potm","ppsm","odp","fodp","otp","sxi","sti","sdd","sdp"],cad:["dwg","dwf","dxf","sldprt","sldasm","slddrw"],text:["txt","log"],image:["odg","otg","odi","sxd","std","sda","svm","jpg","jpeg","png","gif","bmp","tif","tiff","psd","eps","tga","wmf","ai","cgm","fodg","jfif","pbm","pcd","pct","pcx","pgm","ppm","ras","sgf","svg"],code:["html","htm","sql","xml","java","cpp","c","perl","py","rb","php","js","css","applescript","as3","as","bash","shell","sh","cfm","cfml","cs","pas","dcu","diff","patch","ez","erl","groovy","gvy","gy","gsh","javafx","jfx","pl","pm","ps1","ruby","sass","scss","scala","vb","vbscript","xhtml","xslt"],archive:["zip","rar","tar","gz","7z","bz2","z","xz","ace","sit","sitx","tgz","apk"],goog:["gdoc","gsheet","gslides","gdraw"]},function(a,b){g.each(a,function(a){h[a]=b
})}),b.exports={getMime:e,getExt:d,getExtensionFilter:f}},{42:42}],33:[function(a,b){function c(a,b){return"goog"!==b}function d(a){var b;return b=function(b,d){if(!d)throw new Error("Setup required as a second argument");var h,i,j,k,l={folder:!0,file:!0,multiple:!0,forbidden:[]},m=e.extend(l,d.select);return h=function(){j.destroy(),j=null,k=null},i=function(a){k.fetch(a||"/")},k=new g(a,{select:m,filterExtensions:"undefined"==typeof d.filterExtensions?c:d.filterExtensions}),j=new f({el:b,model:k,barAlign:d.barAlign,handlers:{ready:d.ready,selection:function(a){h(),d.selection&&d.selection(a)},close:function(a){h(),d.cancel&&d.cancel(a)},error:d.error},keys:d.keys},d.texts),i(d.path||"/"),{openPath:i,close:h}}}var e=a(42),f=(a(40),a(36)),g=a(34);b.exports=d},{34:34,36:36,40:40,42:42}],34:[function(a,b){function c(a,b){this.data=a,this.data.is_folder?(this.ext="",this.mime="unknown"):(this.ext=f.getExt(a.name).substr(0,3),this.mime=f.getMime(a.name)),this.isSelectable=(b.opts.select.folder&&a.is_folder||b.opts.select.file&&!a.is_folder)&&!b.forbidSelection,this.parent=b,this.isCurrent=!1}function d(a,b){this.opts=b,this.API=a,this.page=1,this.pageSize=200,b.filterExtensions&&(this.fileFilter=f.getExtensionFilter(b.filterExtensions))}var e=a(42),f=a(32);c.prototype.defaultAction=function(){this.data.is_folder?this.parent.fetch(this.data.path):this.toggleSelect()},c.prototype.toggleSelect=function(){this.isSelectable&&(this.parent.opts.select.multiple||this.parent.deselect(),this.selected=!this.selected,this.onchange(),this.parent.onchange())},d.prototype.onloading=e.noop,d.prototype.onupdate=e.noop,d.prototype.onerror=e.noop,d.prototype._set=function(a){var b=this;this.page=1,this.rawItems=[],a&&(this.path=a.path,e.each(a.folders,function(a){b.rawItems.push(a)}),this.opts.select.file&&e.each(a.files,function(a){(!b.fileFilter||b.fileFilter(a))&&b.rawItems.push(a)})),this.forbidSelection=e.contains(this.opts.select.forbidden,this.path),this.totalPages=~~(this.rawItems.length/this.pageSize)+1,this.isMultiselectable=this.opts.select.multiple,this._buildItems()},d.prototype._buildItems=function(){var a=this;if(this.currentItem=-1,this.items=[],this.hasPages=this.rawItems.length>this.pageSize,0===this.rawItems.length)this.isEmpty=!0;else{this.isEmpty=!1;var b=this.rawItems.slice((this.page-1)*this.pageSize,this.page*this.pageSize);e.each(b,function(b){a.items.push(new c(b,a))})}this.onupdate(),this.onchange()},d.prototype.fetch=function(a){var b=this;b.processing||(b.processing=!0,a&&(b.path=a),b.onloading(),b.API.storage.path(b.path).get().then(function(a){b.processing=!1,b._set(a)}).fail(function(a){b.processing=!1,b._set(),b.onerror(a)}))},d.prototype.switchPage=function(a){var b=this.page+a;b<=this.totalPages&&b>0&&(this.page=b,this._buildItems())},d.prototype.goUp=function(){var a=this.path.replace(/\/[^\/]+\/?$/i,"")||"/";a!==this.path&&this.fetch(a)},d.prototype.getSelected=function(){var a=[];return e.each(this.items,function(b){b.selected&&a.push(b.data)}),a},d.prototype.deselect=function(){e.each(this.items,function(a){a.selected&&(a.selected=!1,a.onchange())})},d.prototype.setAllSelection=function(a){e.each(this.items,function(b){b.selected=a,b.onchange()}),this.onchange()},d.prototype.mvCurrent=function(a){this.currentItem+a<this.items.length&&this.currentItem+a>=0&&(this.items[this.currentItem]&&(this.items[this.currentItem].isCurrent=!1,this.items[this.currentItem].onchange()),this.currentItem+=a,this.items[this.currentItem].isCurrent=!0,this.items[this.currentItem].onchange())},d.prototype.getCurrent=function(){return this.items[this.currentItem]},b.exports=d},{32:32,42:42}],35:[function(a,b){function c(a){var b=this,c=this.els={};b.model=a.model,c.selectAll=e([["input[type=checkbox]",{title:a.txt("Select all")}]]).childNodes[0],c.back=e([["a.eg-picker-back.eg-btn[title=back]"]]).childNodes[0],c.crumb=e([["span.eg-picker-path"]]).childNodes[0],a.handleClick(c.selectAll,function(b){a.model.setAllSelection(!!b.target.checked)}),a.handleClick(c.back,a.goUp),a.handleClick(c.crumb,function(a){var c=a.target.getAttribute("data-path");c&&b.model.fetch(c)})}var d=a(42),e=a(49);c.prototype.getTopbar=function(){var a=this.els,b=["div.eg-bar.eg-top"];return this.model.isMultiselectable&&(a.selectAll.checked=!1,b.push(a.selectAll)),b.push(a.back),b.push(a.crumb),b=e([b]).childNodes[0]},c.prototype.render=function(a){var b="/";a=this.model.path||b;var c=a.split("/"),f=[],g=~~(100/c.length);d.each(c,function(a,c){a?(b+=a+"/",c>1&&f.push(["span","/"]),f.push(["a",{"data-path":b,title:a,style:"max-width:"+g+"%"},a])):0===c&&f.push(["a",{"data-path":b},"/"])}),this.els.crumb.innerHTML="",this.els.crumb.appendChild(e([f]))},b.exports=c},{42:42,49:49}],36:[function(a,b){"use strict";function c(a,b){var c=this;this.uid=Math.random(),k=this.uid,this.el=a.el,this.evs=[];var j=this.els={};if(a.noFont||d(),this.txt=g(b),this.bottomBarClass="left"===a.barAlign?"":".eg-bar-right",this.handlers=f.extend({selection:f.noop,events:f.noop,close:f.noop,error:null},a.handlers),this.model=a.model,this.model.onloading=f.bindThis(c,c.renderLoading),this.model.onupdate=function(){if(c.handlers.events("beforeRender",c.model),c.render(),c.handlers.events("render",c.model),c.handlers.ready){var a=c.handlers.ready;c.handlers.ready=null,setTimeout(a,0)}},this.model.onerror=f.bindThis(this,this.errorHandler),this.model.onchange=function(){c.model.getSelected().length>0?c.els.ok.removeAttribute("disabled"):c.els.ok.setAttribute("disabled","")},j.close=h([["a.eg-picker-close.eg-btn",this.txt("Cancel")]]).childNodes[0],j.ok=h([["span.eg-picker-ok.eg-btn.eg-btn-prim",this.txt("Ok")]]).childNodes[0],j.pgup=h([["span.eg-picker-pgup.eg-btn",">"]]).childNodes[0],j.pgdown=h([["span.eg-picker-pgup.eg-btn","<"]]).childNodes[0],this.handleClick(this.el,c.focused),this.handleClick(j.close,function(){c.handlers.close()}),this.handleClick(j.ok,c.confirmSelection),this.handleClick(j.pgup,function(){c.model.switchPage(1)}),this.handleClick(j.pgdown,function(){c.model.switchPage(-1)}),a.keys!==!1){var l=f.extend({up:"<up>",down:"<down>",select:"<space>",explore:"<right>",back:"<left>",confirm:"none",close:"<escape>"},a.keys),m={};m[l.up]=f.bindThis(c,c.kbNav_up),m[l.down]=f.bindThis(c,c.kbNav_down),m[l.select]=f.bindThis(c,c.kbNav_select),m[l.explore]=f.bindThis(c,c.kbNav_explore),m[l.back]=f.bindThis(c.model,c.model.goUp),m[l.confirm]=f.bindThis(c,c.confirmSelection),m[l.close]=f.bindThis(c,c.handlers.close),document.activeElement&&document.activeElement.blur(),this.evs.push(e.onKeys(document,m,f.bindThis(c,c.hasFocus)))}c.subviews={breadcrumb:new i(this)}}function d(){j||(document.getElementsByTagName("head")[0].appendChild(h([["link",{href:"https://fonts.googleapis.com/css?family=Open+Sans:400,600",type:"text/css",rel:"stylesheet"}]])),j=!0)}var e=a(40),f=a(42),g=a(44),h=a(49),i=a(35);a(45);var j=!1,k="no",l={};l.destroy=function(){f.each(this.evs,function(a){a.destroy()}),this.evs=null,this.el.innerHTML="",this.el=null,this.els=null,this.model=null,this.handlers=null},l.handleClick=function(a,b){this.evs.push(e.addListener(a,"click",f.bindThis(this,b)))},l.errorHandler=function(a){if(this.handlers.error){var b=this.handlers.error(a);if("string"==typeof b)return void this.renderProblem("*",b);if(b===!1)return}this.renderProblem(a.RATE?"R":a.statusCode,a.message)},l.render=function(){var a=this,b=this.els;b.list=document.createElement("ul");var c=a.subviews.breadcrumb.getTopbar(),d=h([["div.eg-theme.eg-picker.eg-widget",["a.eg-brand",{title:"egnyte.com"}],c,b.list,["div.eg-bar"+this.bottomBarClass,b.ok,b.close,["div.eg-picker-pager"+(this.model.hasPages?"":".eg-not"),b.pgdown,["span",this.model.page+"/"+this.model.totalPages],b.pgup]]]]);this.el.innerHTML="",this.el.appendChild(d),b.list.style.height=this.el.offsetHeight-2*c.offsetHeight+"px",a.subviews.breadcrumb.render(),this.model.isEmpty?this.renderEmpty():f.each(this.model.items,function(b){a.renderItem(b)})},l.renderItem=function(a){var b=this,c=h([["a.eg-picker-name"+(a.data.is_folder?".eg-folder":".eg-file"),{title:a.data.name},["span.eg-ico.eg-mime-"+a.mime,{"data-ext":a.ext},["span",a.ext]],a.data.name]]).childNodes[0],d=h([["input[type=checkbox]"+(a.isSelectable?"":".eg-not")]]).childNodes[0];d.checked=a.selected;var f=h([["li.eg-picker-item",d,c]]).childNodes[0];e.addListener(c,"click",function(b){return b.stopPropagation&&b.stopPropagation(),a.defaultAction(),!1}),e.addListener(f,"click",function(){a.toggleSelect()}),a.onchange=function(){if(b.handlers.events("itemChange",a),d.checked=a.selected,f.setAttribute("aria-selected",a.isCurrent),a.isCurrent)try{b.els.list.scrollTop=f.offsetTop-b.els.list.offsetHeight}catch(c){}},this.els.list.appendChild(f)},l.renderLoading=function(){this.els.list&&(this.els.list.innerHTML="",this.els.list.appendChild(h([["div.eg-placeholder",["div.eg-spinner"],this.txt("Loading")]])))};var m=a(31);l.renderProblem=function(a,b){b=m[""+a]||m[~(a/100)+"XX"]||b||m["?"],this.els.list?(this.els.list.innerHTML="",this.els.list.appendChild(h([["div.eg-placeholder",["div.eg-picker-error"],b]]))):this.handlers.close({message:b})},l.renderEmpty=function(){this.els.list&&(this.els.list.innerHTML="",this.els.list.appendChild(h([["div.eg-placeholder.eg-folder",["div.eg-ico"],this.txt("This folder is empty")]])))},l.hasFocus=function(){return k===this.uid},l.focused=function(){k=this.uid},l.goUp=function(){this.model.goUp()},l.confirmSelection=function(){var a=this.model.getSelected();a&&a.length&&this.handlers.selection.call(this,this.model.getSelected())},l.kbNav_up=function(){this.model.mvCurrent(-1)},l.kbNav_down=function(){this.model.mvCurrent(1)},l.kbNav_select=function(){this.model.getCurrent().toggleSelect()},l.kbNav_confirm=function(){this.model.getCurrent().toggleSelect()},l.kbNav_explore=function(){var a=this.model.getCurrent();a.data.is_folder&&a.defaultAction()},c.prototype=l,b.exports=c},{31:31,35:35,40:40,42:42,44:44,45:45,49:49}],37:[function(a,b){var c=a(38),d=a(42),e=a(40),f=a(43),g=a(16),h=a(30),i={};b.exports={define:function(a,b){if(i[a])throw new Error("Plugin conflict. "+a+" already exists");i[a]=b},install:function(a){d.each(i,function(b){b(a,{API:a.API,ENDPOINTS:h,promises:c,decorators:g,reusables:{helpers:d,dom:e,messages:f}})})}}},{16:16,30:30,38:38,40:40,42:42,43:43}],38:[function(a,b){function c(a,b){e.each(a,function(a,c){a.then(function(a){b(c,{state:"fulfilled",value:a})},function(a){b(c,{state:"rejected",reason:a})})})}var d=a(1),e=a(42),f=function(a){return a.fail=function(b){return a.then(0,b)},a},g=function(a){var b=d(f);return b(a),b};g.defer=function(){var a=d(f);return{promise:a,resolve:function(b){a(!0,[b])},reject:function(b){a(!1,[b])}}},g.all=function(a){var b=g.defer(),d=[],e=a.length;return c(a,function(a,c){e&&("rejected"===c.state?(e=0,b.reject(c.reason)):(d[a]=c,0===--e&&b.resolve(d)))}),b.promise},g.allSettled=function(a){var b=g.defer(),d=[],e=a.length;return c(a,function(a,c){d[a]=c,0===--e&&b.resolve(d)}),b.promise},b.exports=g},{1:1,42:42}],39:[function(a,b){function c(a,b){if(!b)throw new Error("Setup required as a second argument");var c,g,h=f(b.texts);c=function(){g.destroy(),a.innerHTML=""};var i=e([["span.eg-prompt-ok.eg-btn.eg-btn-prim",h("Ok")]]).childNodes[0],j=e([["input[type=text]"]]).childNodes[0];g=d.addListener(i,"click",function(){j.value;c(),b.result(j.value)});var k="left"===b.barAlign?"":".eg-bar-right",l=e([["div.eg-theme.eg-widget.eg-prompt",["a.eg-brand",{title:"egnyte.com"}],["div.eg-ctlgrp",["label.eg-prompt-ask",h("question")],j],["div.eg-bar"+k,[i]]]]);return a.innerHTML="",a.appendChild(l),j.focus(),{close:c}}var d=(a(42),a(40)),e=a(49),f=a(44);a(45),b.exports=c},{40:40,42:42,44:44,45:45,49:49}],40:[function(a,b){function c(a,b,c){var e;return a.addEventListener?(e=c,a.addEventListener(b,c,!1)):(e=function(a){a=a||window.event,a.target||(a.target=a.srcElement);var b=c.call(this,a);return b===!1&&(a.cancelBubble=!0),b},a.attachEvent("on"+b,e)),{destroy:function(){d(a,b,e)}}}function d(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent(b,c)}var e=a(2);b.exports={addListener:c,onKeys:function(a,b,d){return c(a,"keyup",function(a){return a.preventDefault&&a.preventDefault(),d()&&b[e[a.keyCode]]&&b[e[a.keyCode]](),!1})},createFrame:function(a,b){var c=document.createElement("iframe");return b||c.setAttribute("scrolling","no"),c.style.width="100%",c.style.height="100%",c.style.minWidth="400px",c.style.minHeight="400px",c.style.border="1px solid #dbdbdb",c.src=a,c}}},{2:2}],41:[function(a,b){var c=a(38);b.exports=function(a,b,d){var e,f=!1,g=function(){clearTimeout(e),e=setTimeout(h,1)},h=function(){var i=e;c({interval:a,repeat:g}).then(b).fail(function(a){return d?d(a):void(console&&console.error("Error in scheduled function",a))}).then(function(){f||i!==e||(e=setTimeout(h,a))})};return h(),{stop:function(){f=!0,clearTimeout(e)},forceRun:function(){return f=!1,g()}}}},{38:38}],42:[function(a,b){function c(a,b){if(a)if(a.length===+a.length)for(var c=0;c<a.length;c++)b.call(null,a[c],c,a);else for(var c in a)a.hasOwnProperty(c)&&b.call(null,a[c],c,a)}function d(a,b){var d=!1;return c(a,function(a){a===b&&(d=!0)}),d}function e(a){return a.replace(/\/*$/,"")}var f=/[":<>|?*+&#\\]/;b.exports={extend:function(a){var b,c;for(b=1;b<arguments.length;b++)if(arguments[b])for(c in arguments[b])arguments[b].hasOwnProperty(c)&&"undefined"!=typeof arguments[b][c]&&(a[c]=arguments[b][c]);return a},noop:function(){},id:function(a){return a},bindThis:function(a,b){return function(){return b.apply(a,arguments)}},contains:d,each:c,normalizeURL:e,httpsURL:function(a){return"https://"+e(a).replace(/^https?:\/\//,"")},encodeNameSafe:function(a){if(!a)throw new Error("No name given");if(f.test(a))throw new Error("Disallowed characters in path");return a=a.replace(/^\/\//,"/")}}},{}],43:[function(a,b){function c(a,b,c){return function(d){if(!a||e.normalizeURL(d.origin)===e.normalizeURL(a)){var f=d.data;if(f.substr(0,b.length)===b){try{f=JSON.parse(f.substring(b.length))}catch(g){}f&&c(f)}}}}function d(a,b,c,d,e){var f,g="*";if("string"!=typeof c)throw new TypeError("only string is acceptable as action");if(e)g=e;else try{(a.location.origin||a.location.protocol)&&(g=a.location.origin||a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:""))}catch(h){}f=JSON.stringify({action:c,data:d}),f=f.replace(/(\r\n|\n|\r)/gm,""),a.postMessage(b.marker+f,g)}var e=a(42);b.exports={sendMessage:d,createMessageHandler:c}},{42:42}],44:[function(a,b){b.exports=function(a){return function(b){if(a){if(a[b])return a[b];if(a[b.toLowerCase()])return a[b.toLowerCase()]}return b}}},{}],45:[function(){!function(){var a=document.getElementsByTagName("head")[0];style=document.createElement("style"),style.type="text/css";var b='.eg-btn.eg-picker-back{padding:4px 10px;position:relative;color:#777}.eg-btn.eg-picker-back:hover{color:#4e4e4f}.eg-btn.eg-picker-back:before{content:"";display:block;left:4px;border-style:solid;border-width:0 0 3px 3px;transform:rotate(45deg);-ms-transform:rotate(45deg);-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);width:7px;height:7px;padding:0;position:absolute;bottom:10px}@-webkit-keyframes egspin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes egspin{to{transform:rotate(360deg)}}.eg-placeholder{margin:33%;margin:calc(50% - 88px);margin-bottom:0;text-align:center;color:#777}.eg-placeholder>div{margin:0 auto 5px}.eg-placeholder>.eg-spinner{content:"";-webkit-animation:egspin 1s infinite linear;animation:egspin 1s infinite linear;width:30px;height:30px;border:solid 7px;border-radius:50%;border-color:transparent transparent #dbdbdb}.eg-picker-error:before{content:"?!";font-size:32px;border:2px solid #5e5f60;padding:0 10px}.eg-ico{margin-right:10px;position:relative;top:-2px}.eg-mime-audio{background:#94cbff}.eg-mime-video{background:#8f6bd1}.eg-mime-pdf{background:#e64e40}.eg-mime-word_processing{background:#4ca0e6}.eg-mime-spreadsheet{background:#6bd17f}.eg-mime-presentation{background:#fa8639}.eg-mime-cad{background:#f2d725}.eg-mime-text{background:#9e9e9e}.eg-mime-image{background:#d16bd0}.eg-mime-code{background:#a5d16b}.eg-mime-archive{background:#d19b6b}.eg-mime-goog{background:#0266C8}.eg-mime-unknown{background:#dbdbdb}.eg-file .eg-ico{width:40px;height:40px;text-align:right}.eg-file .eg-ico>span{text-align:center;font-size:13.33333333px;line-height:18px;font-weight:300;margin:10px 0;height:20px;width:32px;background:rgba(0,0,0,.15);color:#fff}.eg-folder .eg-ico{border:1px #d4d8bd solid;border-top:4px #dfe4b9 solid;margin-top:8.8px;height:24.6px;background:#f3f7d3;overflow:visible;width:38px}.eg-folder .eg-ico:before{display:block;position:absolute;top:-8px;left:-1px;border:#d1dabc 1px solid;border-bottom:0;border-radius:2px;background:#dfe4b9;content:" ";width:60%;height:4.4px}.eg-folder .eg-ico>span{display:none}.eg-btn{display:inline-block;line-height:20px;height:20px;text-align:center;margin:0 8px;cursor:pointer}span.eg-btn{padding:4px 15px;background:#fafafa;border:1px solid #ccc;border-radius:2px}span.eg-btn:hover{-webkit-box-shadow:inset 0 -20px 50px -60px #000;box-shadow:inset 0 -20px 50px -60px #000}span.eg-btn:active{-webkit-box-shadow:inset 0 1px 5px -4px #000;box-shadow:inset 0 1px 5px -4px #000}span.eg-btn[disabled]{opacity:.3}a.eg-btn{font-weight:600;padding:4px;border:1px solid transparent;text-decoration:underline}.eg-btn.eg-btn-prim{background:#3191f2;border-color:#2b82d9;color:#fff}.eg-bar,.eg-box,.eg-widget{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;overflow:hidden}.eg-widget{background:#fff;border:1px solid #dbdbdb;padding:0;color:#5e5f60;font-size:12px;font-family:\'Open Sans\',sans-serif}.eg-widget *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle}.eg-widget input{padding:0}.eg-widget a{cursor:pointer}.eg-widget a:hover{text-decoration:underline}.eg-widget .eg-brand{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAD1BMVEVLmJRkpqN9trS51tP6/fqnSbSVAAAAfklEQVQoka2OwRGAIAwEiTYQZyiABwX4oAHw+q9JEsgojr7kPnA7Se6cmyfiB/D5H6CjgWSHI7IAj9L8AiAQ62MTqEsJNqH/7JV2rVDtt1DxQ5N0X+hJYWwKDLYIiJePEHDVWGtABd5ySQLkRgJ3wA1QB44thb5jX8C2uXk6AXu0F4Px6fa6AAAAAElFTkSuQmCC) no-repeat center;width:50px;height:50px;position:absolute;top:0;right:0;z-index:3}.eg-bar{z-index:1;height:50px;padding:10px;background:#f1f1f1;border:0 solid #dbdbdb;border-width:1px 0 0}.eg-bar.eg-top{box-shadow:0 1px 3px 0 #f1f1f1;border-width:0 0 1px;padding-left:0;background:#fff}.eg-bar>*{float:left}.eg-bar-right>*{float:right}.eg-ctlgrp{padding:20px}.eg-ctlgrp>*{width:99%;margin:10px 0}.eg-not{visibility:hidden}.eg-prompt{padding-top:20px}.eg-picker{height:100%;min-height:300px}.eg-picker input{margin:10px 20px}.eg-picker a.eg-file:hover{text-decoration:none}.eg-picker ul{padding:0;margin:0;min-height:200px;overflow-y:scroll}.eg-picker-pager{float:right}.eg-bar-right>.eg-picker-pager{float:left}.eg-picker-path{min-width:60%;width:calc(100% - 110px);line-height:30px;color:#777;font-size:14px}.eg-picker-path>a{margin:0 2px;white-space:nowrap;display:inline-block;overflow:hidden;text-overflow:ellipsis}.eg-picker-path>a:last-child{color:#5e5f60;font-size:16px}.eg-picker-item{line-height:40px;list-style:none;padding:4px 0;border-bottom:1px solid #f2f3f3}.eg-picker-item:hover{background:#f1f5f8;outline:1px solid #dbdbdb}.eg-picker-item[aria-selected=true]{background:#dde9f3}.eg-picker-item *{display:inline-block}.eg-picker-item>a{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:300px;max-width:calc(100% - 88px)}';style.styleSheet?style.styleSheet.cssText=b:style.appendChild(document.createTextNode(b)),a.appendChild(style)}()},{}],46:[function(a,b){b.exports=function(a,b,c,d){function e(a){a.action&&a.data&&"init"===a.action&&m.resolve(a.data)}function f(a,b){c.sendMessage(o,n,a,{uid:l,body:b},k)}function g(a){f("complete",a)}function h(){f("reload")}function i(a){f("error",a)}function j(){f("close")}var k,l,m=a.defer(),n={marker:"-U",sourceOrigin:null},o=window.opener||window.parent;n.handler=c.createMessageHandler(n.sourceOrigin,n.marker,e),n._evListener=b.addListener(window,"message",n.handler),b.addListener(window,"unload",j),b.addListener(window,"pagehide",h),c.sendMessage(o,n,"load",null,k),m.promise.then(function(a){k=a.origin,l=a.uid,d({data:a.data,reload:h,error:i,complete:g})})}},{}],47:[function(a,b){var c=a(11),d=a(46);c.appInit=function(a){c.plugin("uintegrate",function(b,c){var e=c.reusables.messages,f=c.reusables.dom,g=c.promises;return d(g,f,e,a)})},b.exports=c},{11:11,46:46}],48:[function(a,b){var c=a(42),d=a(37),e=a(10);b.exports={init:function(b,f){var g=c.extend({},e,f);g.egnyteDomainURL=b?c.normalizeURL(b):null;var h={domain:g.egnyteDomainURL,setDomain:function(a){this.domain=g.egnyteDomainURL=c.normalizeURL(a)},API:a(12)(g)};return d.install(h),h},plugin:d.define}},{10:10,12:12,37:37,42:42}],49:[function(a,b){var c=function(){var a=function(a){return!!a&&"[object Object]"==Object.prototype.toString.call(a)&&!a.nodeType},b=function(a){return"[object Array]"==Object.prototype.toString.call(a)},c=function(a,b){var c;if(a)if(a.length)for(c=0;c<a.length;c++)b(a[c],c);else for(c in a)a.hasOwnProperty(c)&&b(a[c],c)},d=function(){var a={};return c(arguments,function(b){c(b,function(b,c){a[c]=b})}),a},e=function(a){var b={"\\[([a-z\\-]+)=([^\\]]+)\\]":function(a){var b={};return b[a[1]]=a[2].replace(/^["']/,"").replace(/["']$/,""),b},"#([a-zA-Z][a-zA-Z0-9\\-_]*)":function(a){return{id:a[1]}},"(\\.[a-zA-Z][a-zA-Z0-9\\-_]*)+":function(a){return{"class":a[0].substr(1).split(".").join(" ")}}},e={};return c(b,function(b,c){var f;for(c=new RegExp(c);c.test(a);)f=c.exec(a),a=a.replace(f[0],""),e=d(e,b(f))}),[a,e]},f=function(g,h){return h=h||document.createDocumentFragment(),c(g,function(g){var i,j,k;b(g)?"string"==typeof g[0]?(i=e(g.shift()),j=a(g[0])?g.shift():{},k=document.createElement(i[0]),c(d(i[1],j),function(a,b){k.setAttribute(b,a)}),h.appendChild(k),f(g,k)):f(g,h):g.nodeType?h.appendChild(g):("string"==typeof g||"number"==typeof g)&&h.appendChild(document.createTextNode(g))}),h};return f}();"undefined"!=typeof b&&(b.exports=c)},{}]},{},[47])(47)});