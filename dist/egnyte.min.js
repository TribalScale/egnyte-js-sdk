// egnyte-widget v0.1.1 (2014-05-14) 
// license:MIT 
// ztenerowicz 
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.once=c,d.off=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(a,b){(function(a){!function(b){function c(a){return"function"==typeof a}function d(a){return"object"==typeof a}function e(b){"undefined"!=typeof setImmediate?setImmediate(b):"undefined"!=typeof a&&a.nextTick?a.nextTick(b):setTimeout(b,0)}var f;b[0][b[1]]=function g(){var a,b=[],h=[],i=function(c,d){return null==a&&null!=c&&(a=c,b=d,h.length&&e(function(){for(var a=0;a<h.length;a++)h[a]()})),a};return i.then=function(i,j){var k=g(),l=function(){function e(a){var b,g=0;try{if(a&&(d(a)||c(a))&&c(b=a.then)){if(a===k)throw new TypeError;b.call(a,function(){g++||e.apply(f,arguments)},function(a){g++||k(!1,[a])})}else k(!0,arguments)}catch(h){g++||k(!1,[h])}}try{var g=a?i:j;c(g)?e(g.apply(f,b||[])):k(a,b)}catch(h){k(!1,[h])}};return null!=a?e(l):h.push(l),k},i.always=function(a){return i.then(a,a)},i.error=function(a){return i.then(0,a)},i}}("undefined"==typeof b?[window,"pinkySwear"]:[b,"exports"])}).call(this,a("/home/zb/repo/_git/egnyte-widget/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/zb/repo/_git/egnyte-widget/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":1}],3:[function(a,b){function c(a,b){function c(){4===k.readyState&&e()}function e(){var a=null,c=k.statusCode=k.status,d=k.body=k.response||k.responseText||k.responseXML;if(1223===c&&(c=204),0===c||c>=400&&600>c){var e=k.responseText||g[String(k.status).charAt(0)];a=new Error(e),a.statusCode=k.status}if(q)try{d=k.body=JSON.parse(d)}catch(f){}b(a,k,d)}function j(a){b(a,k)}"string"==typeof a&&(a={uri:a}),a=a||{},b=f(b);var k=a.xhr||null;!k&&a.cors?k=new i:k||(k=new h);var l=k.url=a.uri||a.url,m=k.method=a.method||"GET",n=a.body||a.data,o=k.headers=a.headers||{},p=!!a.sync,q=!1;return"json"in a&&(q=!0,"GET"!==m&&"HEAD"!==m&&(o["Content-Type"]="application/json",n=JSON.stringify(a.json))),k.onreadystatechange=c,k.onload=e,k.onerror=j,k.onprogress=function(){},k.ontimeout=d,k.open(m,l,!p),a.cors&&(k.withCredentials=!0),p||(k.timeout="timeout"in a?a.timeout:5e3),k.setRequestHeader&&Object.keys(o).forEach(function(a){k.setRequestHeader(a,o[a])}),"responseType"in a&&(k.responseType=a.responseType),k.send(n),k}function d(){}var e=a("global/window"),f=a("once"),g={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},h=e.XMLHttpRequest||d,i="withCredentials"in new h?e.XMLHttpRequest:e.XDomainRequest;b.exports=c},{"global/window":4,once:5}],4:[function(a,b){(function(a){b.exports="undefined"!=typeof window?window:"undefined"!=typeof a?a:{}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(a,b){function c(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(this,arguments))}}b.exports=c,c.proto=c(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return c(this)},configurable:!0})})},{}],6:[function(a){!function(){"use strict";function b(b,e){return d=c.extend(d,e),d.egnyteDomainURL=c.normalizeURL(b),{domain:d.egnyteDomainURL,filePicker:a("./lib/filepicker")(d),API:a("./lib/api")(d)}}var c=a("./lib/helpers"),d={};window.EgnyteWidget={init:b}}()},{"./lib/api":7,"./lib/filepicker":10,"./lib/helpers":11}],7:[function(a,b){var c=a("./api_elements/auth"),d=a("./api_elements/storage");b.exports=function(a){var b=c(a),e=d(b,a);return{auth:b,storage:e}}},{"./api_elements/auth":8,"./api_elements/storage":9}],8:[function(a,b){function c(a){if(k)a();else{var b=m.exec(window.location.hash);b?b.length>1&&(k=b[1],a()):window.location.href=l.egnyteDomainURL+"/puboauth/token?client_id="+l.key+"&mobile="+~~l.mobile+"&redirect_uri="+window.location.href}}function d(a){a.setRequestHeader("Authorization","Bearer "+k)}function e(){return{Authorization:"Bearer "+k}}function f(){return l.egnyteDomainURL+"/pubapi/v1"}function g(){return!!k}function h(){return k}function i(a){k=a}function j(){k=null}var k,l,m=/access_token=([^&]+)/;b.exports=function(a){return l=a,l.token&&i(l.token),{isAuthenticated:g,setToken:i,authenticate:c,authorizeXHR:d,getHeaders:e,getToken:h,dropToken:j,getEndpoint:f}}},{}],9:[function(a,b){function c(a,b){if(l.isAuthenticated())return a.headers=a.headers||{},a.headers.Authorization="Bearer "+l.getToken(),o(a,function(a,c){if(403==c.statusCode&&r.test(c.responseText))throw new Error(c.responseText);b.apply(this,arguments)});throw new Error("Not authenticated")}function d(a){return a.split("/").map(function(a){return a.replace(/[^a-z0-9 ]*/gi,"")}).join("/").replace(/^\//,""),a}function e(a){var b=n.defer();return a=d(a)||"",c({method:"GET",url:l.getEndpoint()+p+"/"+encodeURI(a)},function(a,c){b.resolve(200==c.statusCode?!0:!1)}),b.promise}function f(a){var b=n.defer();return a=d(a)||"",c({method:"GET",url:l.getEndpoint()+p+"/"+encodeURI(a)},function(a,c,d){b.resolve(d)}),b.promise}function g(a){var b=n.defer();return a=d(a)||"",c({method:"POST",url:l.getEndpoint()+p+"/"+encodeURI(a),json:{action:"add_folder"}},function(c,d){201==d.statusCode?b.resolve({id:d.headers.etag,path:a}):b.reject(d.statusCode)}),b.promise}function h(a,b){if(!b)throw new Error("Cannot move to empty path");var e=n.defer();return a=d(a)||"",b=d(b),c({method:"POST",url:l.getEndpoint()+p+"/"+encodeURI(a),json:{action:"move",destination:"/"+b}},function(b,c){200==c.statusCode?e.resolve({id:c.headers.etag,path:a}):e.reject(c.statusCode)}),e.promise}function i(a){var b=n.defer();return a=d(a)||"",c({method:"DELETE",url:l.getEndpoint()+p+"/"+encodeURI(a)},function(a,c){200==c.statusCode?b.resolve():b.reject(c.statusCode)}),b.promise}function j(a,b){if(!window.FormData)throw new Error("Unsupported browser");var e=n.defer(),f=b.files[0],g=new window.FormData;return g.append("file",f),a=d(a)||"",c({method:"POST",url:l.getEndpoint()+q+"/"+encodeURI(a),body:g},function(a,b){200===b.statusCode||201===b.statusCode?e.resolve(b.headers.etag):e.reject(b.statusCode)}),e.promise}function k(a,b){a=d(a)||"";var e={method:"DELETE",url:l.getEndpoint()+p+"/"+encodeURI(a)},f=n.defer();return b&&(e.url+="?entry_id="+b),c(e,function(a,b){200==b.statusCode?f.resolve():f.reject(b.statusCode)}),f.promise}var l,m,n=a("../promises"),o=a("xhr"),p="/fs",q="/fs-content",r=/<h1>Developer Over Qps<\/h1>/gi;b.exports=function(a,b){return m=b,l=a,{exists:e,get:f,createFolder:g,removeFolder:i,move:h,rename:h,storeFile:j,removeVersion:k,removeFile:k}}},{"../promises":12,xhr:3}],10:[function(a,b){!function(){function c(a,b){a.handler=i.createMessageHandler(a.sourceOrigin,a.marker,b),h.addListener(window,"message",a.handler)}function d(a,b){h.removeListener(window,"message",a.handler),b.parentNode&&b.parentNode.removeChild(b)}function e(a,b){return function(c){var d;if(c.action)switch(b.hasOwnProperty(c.action)&&b[c.action].call&&(d=b[c.action](c.data)),c.action){case"selection":d!==!1&&a();break;case"cancel":a()}}}function f(a){var b,f=!1;return a=g.extend(j,a),b=function(b,g,j){var k,l={marker:a.channelMarker,sourceOrigin:a.egnyteDomainURL},m=function(){a.openAt&&i.sendMessage(k.contentWindow,l,"openAt",a.openAt)},n=function(){d(l,k)},o=function(b){a.openAt=b,f&&m()};return k=h.createFrame(a.egnyteDomainURL+"/"+a.filepickerViewAddress),c(l,e(n,{selection:g,cancel:j,ready:function(){f=!0,m()}})),b.appendChild(k),{close:n,openAt:o}}}var g=a("./helpers"),h=a("./reusables/dom"),i=a("./reusables/messages"),j={filepickerViewAddress:"folderExplorer.html",channelMarker:"'E"};b.exports=f}()},{"./helpers":11,"./reusables/dom":13,"./reusables/messages":15}],11:[function(a,b){function c(a){return a.replace(/\/*$/,"")}function d(a){var b,c;for(b=1;b<arguments.length;b++)if(arguments[b])for(c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a}b.exports={extend:d,normalizeURL:c}},{}],12:[function(a,b){var c=a("pinkyswear");b.exports={defer:function(){var a=c();return{promise:a,resolve:function(b){a(!0,[b])},reject:function(b){a(!0,[b])}}}}},{pinkyswear:2}],13:[function(a,b){b.exports={addListener:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,function(a){a=a||window.event,a.target||(a.target=a.srcElement),c.call(this,a)})},removeListener:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},createFrame:function(a){var b=document.createElement("iframe");return b.setAttribute("scrolling","no"),b.style.width="100%",b.style.height="100%",b.style.minWidth="400px",b.style.minHeight="400px",b.style.border="1px solid #dbdbdb",b.src=a,b}}},{}],14:[function(a,b){b.exports=function(){"use strict";function a(a){return a.replace(/\\(?:u(.{4})|([^u]))/g,function(a,b,c){return b?String.fromCharCode(parseInt(b,16)):g[c]})}var b,c,d,e,f,g={"\\":"\\",'"':'"',"/":"/",t:"	",n:"\n",r:"\r",f:"\f",b:"\b"},h={go:function(){b="ok"},firstokey:function(){e=f,b="colon"},okey:function(){e=f,b="colon"},ovalue:function(){b="ocomma"},firstavalue:function(){b="acomma"},avalue:function(){b="acomma"}},i={go:function(){b="ok"},ovalue:function(){b="ocomma"},firstavalue:function(){b="acomma"},avalue:function(){b="acomma"}},j={"{":{go:function(){c.push({state:"ok"}),d={},b="firstokey"},ovalue:function(){c.push({container:d,state:"ocomma",key:e}),d={},b="firstokey"},firstavalue:function(){c.push({container:d,state:"acomma"}),d={},b="firstokey"},avalue:function(){c.push({container:d,state:"acomma"}),d={},b="firstokey"}},"}":{firstokey:function(){var a=c.pop();f=d,d=a.container,e=a.key,b=a.state},ocomma:function(){var a=c.pop();d[e]=f,f=d,d=a.container,e=a.key,b=a.state}},"[":{go:function(){c.push({state:"ok"}),d=[],b="firstavalue"},ovalue:function(){c.push({container:d,state:"ocomma",key:e}),d=[],b="firstavalue"},firstavalue:function(){c.push({container:d,state:"acomma"}),d=[],b="firstavalue"},avalue:function(){c.push({container:d,state:"acomma"}),d=[],b="firstavalue"}},"]":{firstavalue:function(){var a=c.pop();f=d,d=a.container,e=a.key,b=a.state},acomma:function(){var a=c.pop();d.push(f),f=d,d=a.container,e=a.key,b=a.state}},":":{colon:function(){if(Object.hasOwnProperty.call(d,e))throw new SyntaxError('Duplicate key "'+e+'"');b="ovalue"}},",":{ocomma:function(){d[e]=f,b="okey"},acomma:function(){d.push(f),b="avalue"}},"true":{go:function(){f=!0,b="ok"},ovalue:function(){f=!0,b="ocomma"},firstavalue:function(){f=!0,b="acomma"},avalue:function(){f=!0,b="acomma"}},"false":{go:function(){f=!1,b="ok"},ovalue:function(){f=!1,b="ocomma"},firstavalue:function(){f=!1,b="acomma"},avalue:function(){f=!1,b="acomma"}},"null":{go:function(){f=null,b="ok"},ovalue:function(){f=null,b="ocomma"},firstavalue:function(){f=null,b="acomma"},avalue:function(){f=null,b="acomma"}}};return function(d,e){var g,k=/^[\x20\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;b="go",c=[];try{for(;g=k.exec(d),g;)g[1]?j[g[1]][b]():g[2]?(f=+g[2],i[b]()):(f=a(g[3]),h[b]()),d=d.slice(g[0].length)}catch(l){b=l}if("ok"!==b||/[^\x20\t\n\r]/.test(d))throw b instanceof SyntaxError?b:new SyntaxError("JSON");return"function"==typeof e?function m(a,b){var c,d,f=a[b];if(f&&"object"==typeof f)for(c in f)Object.prototype.hasOwnProperty.call(f,c)&&(d=m(f,c),void 0!==d?f[c]=d:delete f[c]);return e.call(a,b,f)}({"":f},""):f}}()},{}],15:[function(a,b){function c(a,b,c){return function(d){if(!a||e.normalizeURL(d.origin)===e.normalizeURL(a)){var g=d.data;if(g.substr(0,2)===b){try{g=f(g.substring(2))}catch(h){}g&&c(g)}}}}function d(a,b,c,d){var e="*";if("string"!=typeof d||"string"!=typeof c)throw new TypeError("only string is acceptable as action and data");try{e=a.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}catch(f){}d=d.replace(/"/gm,'\\"').replace(/(\r\n|\n|\r)/gm,""),a.postMessage(b.marker+'{"action":"'+c+'","data":"'+d+'"}',e)}var e=a("../helpers"),f=JSON&&JSON.parse?JSON.parse:a("./json_parse_state");b.exports={sendMessage:d,createMessageHandler:c}},{"../helpers":11,"./json_parse_state":14}]},{},[6]);